<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="./logo.png"><title>性能优化 | 谷雨小栈</title><meta name="description" content="我的一些生活切片">
    <link rel="modulepreload" href="/guyu.inn/assets/app-5c2eab03.js"><link rel="modulepreload" href="/guyu.inn/assets/framework-1749bed7.js"><link rel="modulepreload" href="/guyu.inn/assets/optimization.html-dbbb6a13.js"><link rel="modulepreload" href="/guyu.inn/assets/optimization.html-1bb7da03.js"><link rel="prefetch" href="/guyu.inn/assets/index.html-6d5e9dd3.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index.html-ab097b1e.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ai.html-a6d6d502.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/database.html-ecf43c05.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/base.html-b953fa6d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/browser.html-d92f4b64.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/canvas.html-59d1ef4e.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-base.html-2cb1dafc.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-tool.html-c3406d08.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/designMode.html-2601d84d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/esm.html-cf18d583.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/html.html-baba164b.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/http-base.html-02f1350d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-base.html-616fd2a5.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-practice.html-c4ca7d62.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/logic.html-f3e534d9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/network.html-d5555fa1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-base.html-1a1d1807.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-frame.html-7d5a3790.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/packageManager.html-e7296821.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/pwa.html-bbfee5ed.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/react.html-85d7fa8d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/scene.html-2190d63d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ssr.html-cbaa2746.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tcp.html-f6b26556.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tencent.html-d664718f.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-base.html-01de89c1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-practice.html-70e254a0.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vite.html-3719828d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vue.html-52703ab1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/webpack.html-466121a5.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ws.html-f21fca11.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/devops.html-48b240d9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index.html-63b2c6d6.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index.html-88455b41.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ai.html-b54a67bc.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/database.html-d25a0bd4.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/base.html-d248029a.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/browser.html-d29951a1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/canvas.html-f4ed77c8.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-base.html-f50b914f.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-tool.html-4e9ab78a.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/designMode.html-371f8739.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/esm.html-5108f374.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/html.html-029f7950.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/http-base.html-4222efc8.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-base.html-999f91f7.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-practice.html-7e47f78b.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/logic.html-b8814052.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/network.html-6511086c.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-base.html-391ffb82.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-frame.html-91a19c50.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/packageManager.html-5eb25c11.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/pwa.html-1c700e74.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/react.html-a22025d5.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/scene.html-08796381.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ssr.html-c6893772.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tcp.html-b10bb9e9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tencent.html-be16d1b3.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-base.html-5993c65d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-practice.html-7be565f9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vite.html-adee8657.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vue.html-aa0d9727.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/webpack.html-8789ba6a.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ws.html-a4f1ee22.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/devops.html-f225b1cb.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/404.html-1c7b349e.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/reco-valine-a0c1af1f.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index-ade63bb5.js" as="script">
    <link rel="preload" href="/guyu.inn/assets/style-28490fbc.css" as="style"><link rel="stylesheet" href="/guyu.inn/assets/style-28490fbc.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><div><header class="navbar-container"><!--[--><div class="site-brand nav-item"><img class="logo" src="/guyu.inn/logo.png" alt="谷雨小栈"><a href="/guyu.inn/" class="site-name can-hide">谷雨小栈</a></div><div class="nav-item navbar-links-wrapper" style=""><div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/guyu.inn/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/fe/html" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/be/database" class="link" aria-label="后端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->后端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ops/devops" class="link" aria-label="运维"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->运维<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/algorithm/base" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ai/ai" class="link" aria-label="人工智能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->人工智能<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="我的江湖"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="我的江湖"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://github.com/Lruler" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="http://forum.muxixyz.com/" target="_blank" rel="noopener noreferrer" aria-label="茶馆"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->茶馆<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://space.bilibili.com/628418245?spm_id_from=333.1007.0.0" target="_blank" rel="noopener noreferrer" aria-label="bilibili"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->bilibili<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div><!--]--></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/guyu.inn/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/fe/html" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/be/database" class="link" aria-label="后端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->后端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ops/devops" class="link" aria-label="运维"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->运维<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/algorithm/base" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ai/ai" class="link" aria-label="人工智能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->人工智能<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="我的江湖"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="我的江湖"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://github.com/Lruler" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="http://forum.muxixyz.com/" target="_blank" rel="noopener noreferrer" aria-label="茶馆"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->茶馆<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://space.bilibili.com/628418245?spm_id_from=333.1007.0.0" target="_blank" rel="noopener noreferrer" aria-label="bilibili"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->bilibili<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/guyu.inn/logo.png" alt="谷雨小栈"><a href="/guyu.inn/" class="site-name can-hide">谷雨小栈</a></div><!--[--><!--[--><a href="/guyu.inn/docs/fe/html.html" class="link series-item" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/browser.html" class="link series-item" aria-label="浏览器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->性能优化<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/designMode.html" class="link series-item" aria-label="设计模式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->设计模式<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/scene.html" class="link series-item" aria-label="场景题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->场景题<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/tencent.html" class="link series-item" aria-label="腾讯实习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->腾讯实习<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">CSS篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/css-base.html" class="link series-item" aria-label="CSS基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/css-tool.html" class="link series-item" aria-label="CSS工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS工具<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">JavaScript篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/js-base.html" class="link series-item" aria-label="JS基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/js-practice.html" class="link series-item" aria-label="JS实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS实践<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/canvas.html" class="link series-item" aria-label="Canvas学习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Canvas学习<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">TypeScript篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/ts-base.html" class="link series-item" aria-label="Ts基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ts基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/ts-practice.html" class="link series-item" aria-label="Ts应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ts应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">Node篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/node-base.html" class="link series-item" aria-label="Node基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Node基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/node-frame.html" class="link series-item" aria-label="Node框架"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Node框架<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">计算机网络篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/http-base.html" class="link series-item" aria-label="HTTP基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTTP基础<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/tcp.html" class="link series-item" aria-label="TCP基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TCP基础<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/ws.html" class="link series-item" aria-label="WebSocket"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->WebSocket<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">前端框架篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/react.html" class="link series-item" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/vue.html" class="link series-item" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">工具篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/esm.html" class="link series-item" aria-label="es moudle与commonJS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->es moudle与commonJS<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/vite.html" class="link series-item" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/webpack.html" class="link series-item" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/packageManager.html" class="link series-item" aria-label="包管理器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->包管理器<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">零碎知识点</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/ssr.html" class="link series-item" aria-label="ssr"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ssr<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/pwa.html" class="link series-item" aria-label="pwa"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->pwa<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/logic.html" class="link series-item" aria-label="智力题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->智力题<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">性能优化</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->谷雨<!--]--></span></span><!----><!----><!----><!----></div><div class="theme-reco-default-content"><div><p><img src="/guyu.inn/assets/youhua-b8a923f7.webp" alt=""></p><h2 id="性能优化" tabindex="-1"><a class="header-anchor" href="#性能优化" aria-hidden="true">#</a> 性能优化</h2><p>所以前端的性能优化，就可以从一个经典问题 浏览器输入URL后发生什么 入手，从每一个步骤去思考优化的可能</p><ol><li>网络传输阶段</li></ol><p>这个阶段可以：</p><ul><li><p>DNS优化: 预解析</p><p>DNS预解析 -- 使用 meta 标签</p><p><code>&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot; /&gt;</code></p><p>DNS预解析 -- 使用 link 标签</p><p><code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://www.baidu.com&quot; /&gt;</code></p><p>当浏览器访问一个域名的时候，需要解析一次DNS，获得对应域名的ip地址。</p><p>浏览器缓存 =&gt; 系统缓存 =&gt; 路由器缓存 =&gt;ISP(运营商)DNS缓存 =&gt; 根域名服务器 =&gt; 顶级域名服务器 =&gt; 主域名服务器的顺序逐步读取缓存，直到拿到IP地址</p><p>作用：根据浏览器定义的规则，提前解析之后可能会用到的域名，使解析结果缓存到系统缓存中，缩短DNS解析时间，来提高网站的访问速度</p></li><li><p>HTTP优化</p><ul><li>使用HTTP缓存（强缓存/协商缓存/service worker缓存离线资源）</li><li>减少HTTP请求 <ul><li>合并CSS和JavaScript文件。</li><li>使用CSS Sprites将多个小图标合并成一张大图。</li><li>尽量使用字体图标（如Font Awesome）代替图片。</li></ul></li><li>优化资源加载 <ul><li>压缩CSS、JavaScript和HTML文件，减少文件大小。</li><li>优化图片大小，使用WebP、JPEG 2000等现代图像格式。</li><li>使用懒加载（Lazy Loading）技术，仅在需要时加载图片和其他资源。</li><li>使用预加载，预加载是一种优化策略，可以提前加载关键资源，以便在用户需要时立即可用。</li></ul></li><li>优化网络传输： <ul><li>使用CDN（内容分发网络）加速静态资源的加载。</li><li>开启HTTP压缩（如Gzip）以减少传输数据大小。</li><li>使用HTTP/2或HTTP/3协议以获得更高的传输性能。</li></ul></li><li>使用SSR</li></ul></li></ul><p>这里还要考虑一点，在网络传输的过程中是不是可以理解为数据体积越小速度越快？那其实打包工具的优化也可以放在这。</p><ul><li>减少打包体积？ <ol><li>按需加载，路由/类库</li><li>Scope Hoisting 会分析出模块之间的依赖关系，尽可能的把打包出来的模块合并到一个函数中去。</li><li>Tree Shaking 可以实现删除项目中未被引用的代码</li></ol></li></ul><ol start="2"><li>渲染页面阶段</li></ol><p>这里其实就是更多的设计到一些代码层面的优化了，比如</p><ul><li><p>使用Web性能API：</p><ul><li>利用<code>requestAnimationFrame</code>进行动画操作，而不是<code>setTimeout</code>或<code>setInterval</code>。</li><li>使用<code>window.performance</code> API监控页面性能。</li><li>减少回流（reflow）和重绘（repaint）：避免频繁修改样式，尽量在修改样式之前将元素设<code>display: none</code>，完成修改后再显示</li></ul></li><li><p>使用按需加载（路由，组件，静态资源），代码分割</p></li><li><p>虚拟列表</p></li><li><p>web worker处理长任务</p></li><li><p>js的async和defer，一些link标签的preload,prefetch属性</p></li></ul><p>什么是代码分割？</p><p>代码分割是指，将脚本中无需立即调用的代码在代码构建时转变为异步加载的过程。</p><p>在 Webpack 构建时，会避免加载已声明要异步加载的代码，异步代码会被单独分离出一个文件，当代码实际调用时被加载至页面。</p><h3 id="react性能优化" tabindex="-1"><a class="header-anchor" href="#react性能优化" aria-hidden="true">#</a> React性能优化</h3><ol><li><p>避免不必要的重新渲染：</p><ul><li>使用<code>React.memo</code>包装函数式组件，仅在props改变时重新渲染。</li><li>在类组件中，使用<code>shouldComponentUpdate</code>或继承<code>React.PureComponent</code>来避免不必要的重新渲染。</li></ul></li><li><p>使用虚拟化列表：</p><ul><li>对于大型列表或表格，使用虚拟化（如<code>react-window</code>库）仅渲染可见部分，以提高性能。</li></ul></li><li><p>优化事件处理器：</p><ul><li>使用事件委托（Event Delegation）减少事件监听器。</li><li>使用防抖（Debounce）和节流（Throttle）技术避免频繁触发事件处理器。</li></ul></li><li><p>代码分割和按需加载：</p><ul><li>使用<code>React.lazy</code>和<code>React.Suspense</code>实现组件的懒加载和按需加载。</li><li>使用Webpack等构建工具进行代码分割。</li></ul></li><li><p>使用<code>React.Fragment</code>避免额外的DOM元素：</p><ul><li>使用<code>React.Fragment</code>组合多个子元素，以避免创建不必要的DOM节点。</li></ul></li><li><p>优化React Context：</p><ul><li>使用多个独立的Context来避免不必要的组件重新渲染。</li><li>将Context Provider放在组件树的合适位置，以减少作用范围。</li></ul></li><li><p>使用<code>useCallback</code>和<code>useMemo</code>避免不必要的计算和渲染：</p><ul><li>使用<code>useCallback</code>保存事件处理器和回调函数的引用，避免不必要的重新创建。</li><li>使用<code>useMemo</code>缓存计算结果，避免不必要的重新计算。</li></ul></li><li><p>优化CSS-in-JS：</p><ul><li>避免在组件内部创建大量CSS规则，尽量将样式提取到外部。</li><li>使用<code>classnames</code>库或其他方法避免不必要的样式计算。</li></ul></li><li><p>服务器端渲染（SSR）：</p><ul><li>使用服务器端渲染（如Next.js）加快首屏渲染速度，提高SEO。</li></ul></li><li><p>监控性能：</p></li></ol><ul><li>使用React DevTools和Performance API监控React应用程序的性能。</li><li>使用<code>React.Profiler</code>组件收集组件渲染性能数据。</li></ul><h2 id="如何极致的优化动画性能" tabindex="-1"><a class="header-anchor" href="#如何极致的优化动画性能" aria-hidden="true">#</a> 如何极致的优化动画性能</h2><ol><li>使用CSS动画：CSS动画借助GPU加速，在大多数情况下具有更好的性能。使用transform和opacity属性，避免使用top、left等属性进行动画操作。</li><li>使用requestAnimationFrame：requestAnimationFrame是浏览器提供的优化动画的方法，可以更好地与浏览器的渲染机制同步。</li><li>减少重绘和回流：通过合并多个DOM修改、使用transform进行动画变换，避免频繁的DOM重绘和回流操作，以提高性能。</li><li>使用硬件加速：使用CSS属性translate3d、scale3d等可以启用GPU硬件加速，提高动画的性能。</li><li>避免使用阻塞操作：确保动画执行期间没有长时间的JavaScript计算或网络请求阻塞主线程。</li></ol><h2 id="cdn" tabindex="-1"><a class="header-anchor" href="#cdn" aria-hidden="true">#</a> CDN</h2><p>CDN (全称 Content Delivery Network)，即内容分发网络</p><p>构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。<code>CDN</code> 的关键技术主要有内容存储和分发技术</p><p>简单来讲，<code>CDN</code>就是根据用户位置分配最近的资源</p><p>于是，用户在上网的时候不用直接访问源站，而是访问离他“最近的”一个 CDN 节点，术语叫<strong>边缘节点</strong>，其实就是缓存了源站内容的代理服务器。如下图：</p><h2 id="虚拟列表" tabindex="-1"><a class="header-anchor" href="#虚拟列表" aria-hidden="true">#</a> 虚拟列表</h2><p>和懒加载的区别</p><ul><li><p>懒加载主要是用于优化网络请求的，就是只加载可视部分的资源</p></li><li><p>虚拟列表是优化渲染的，只渲染可视部分的列表Item，而实际上所有的列表信息是已经加载好了，只不过没渲染罢了、</p></li><li><p>懒加载的计算方式 <strong>img.offsetTop (图片距离document顶部的高度)&lt; window.innerHeight(浏览器可视区域高度) + document.body.scrollTop(浏览器滚动过的距离);</strong> 然后使用HTML5中自定义属性的方式 ，写一个自定义属性data-src，然后等到该加载高度时再把data-src赋值给src就行</p></li><li><p>虚拟列表的计算方式:</p><p>虚拟列表的实现，实际上就是在首屏加载的时候，只加载<code>可视区域</code>内需要的列表项，当滚动发生时，动态通过计算获得<code>可视区域</code>内的列表项，并将<code>非可视区域</code>内存在的列表项删除。</p><ul><li>计算当前<code>可视区域</code>起始数据索引(<code>startIndex</code>)</li><li>计算当前<code>可视区域</code>结束数据索引(<code>endIndex</code>)</li><li>计算当前<code>可视区域的</code>数据，并渲染到页面中</li><li>计算<code>startIndex</code>对应的数据在整个列表中的偏移位置<code>startOffset</code>并设置到列表上</li></ul><ol><li><p>假定<code>可视区域</code>高度固定，称之为<code>screenHeight</code></p></li><li><p>假定<code>列表每项</code>高度固定，称之为<code>itemSize</code></p></li><li><p>假定<code>列表数据</code>称之为<code>listData</code></p></li><li><p>假定<code>当前滚动距离</code>称之为<code>scrollTop</code></p><p>则可以推断出</p><p>列表总高度<code>listHeight</code> = listData.length * itemSize</p><p>可显示的列表项数<code>visibleCount</code> = Math.ceil(screenHeight / itemSize)</p><p>数据的起始索引<code>startIndex</code> = Math.floor(scrollTop / itemSize)</p><p>数据的结束索引<code>endIndex</code> = startIndex + visibleCount</p><p>列表显示数据为<code>visibleData</code> = listData.slice(startIndex,endIndex)</p><p>偏移量<code>startOffset</code> = scrollTop - (scrollTop % itemSize);</p></li></ol></li></ul><p>布局方案：就用相对定位和绝对定位</p><p>注意⚠️: 那如果 渲染Item中的高度是动态的，也就是说ItemSize可变，又该如何计算呢。</p><p>我们可以先设定一个预估高度渲染，然后获取真实高度再缓存</p><p>高速白屏的优化： 在可视区的上方和下方设定一个缓冲区</p><p>其他优化方案: 使用 <code>IntersectionObserver</code> 监听事件 可以只监听可视区域的变化，使用 <code>ResizeObserver</code>监听内容区域宽高变</p><h2 id="首页白屏优化" tabindex="-1"><a class="header-anchor" href="#首页白屏优化" aria-hidden="true">#</a> 首页白屏优化</h2><p>白屏时间即是，浏览器开始显示内容的时间，所以我们一般认为解析完<code>&lt;head&gt;</code>的时刻，或者开始渲染<code>&lt;body&gt;</code>标签就是该页面白屏结束的时间。</p><p>白屏时间: window.performance.timing.domLoading - window.performance.timing.navigationStart</p><p>首屏时间是指用户打开一个网站时，直到浏览器首页面内容渲染完成的时间。</p><p>首屏时间: window.performance.timing.domInteractive - window.performace.timing.navigationStart</p><ol><li>DNS预解析 DNS预解析 -- 使用 meta 标签 <code>&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot; /&gt;</code> DNS预解析 -- 使用 link 标签 <code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://www.baidu.com&quot; /&gt;</code> 当浏览器访问一个域名的时候，需要解析一次DNS，获得对应域名的ip地址。 浏览器缓存 =&gt; 系统缓存 =&gt; 路由器缓存 =&gt;ISP(运营商)DNS缓存 =&gt; 根域名服务器 =&gt; 顶级域名服务器 =&gt; 主域名服务器的顺序 逐步读取缓存，直到拿到IP地址</li></ol><p>作用：根据浏览器定义的规则，提前解析之后可能会用到的域名，使解析结果缓存到系统缓存中，缩短DNS解析时间，来提高网站的访问速度</p><ol start="2"><li><p>路由，组件，图片等懒加载</p></li><li><p>合理是有tree shanking 减少代码体积</p></li><li><p>虚拟列表</p></li><li><p>web worker优化长任务</p></li><li><p>js的async和defer，一些link标签的preload,prefetch属性</p></li></ol><p>preload: 用于提前加载一些需要的依赖，这些资源会优先加载 preload 特点：</p><p>1）preload 加载的资源是在浏览器渲染机制之前进行处理的，并且不会阻塞 onload 事件；</p><p>2）preload 加载的 JS 脚本其加载和执行的过程是分离的，即 preload 会预加载相应的脚本代码，待到需要时自行调用</p><p>prefetch 是利用浏览器的空闲时间，加载页面将来可能用到的资源的一种机制；通常可以用于加载其他页面（非首页）所需要的资源，以便加快后续页面的打开速度</p><p>prefetch 特点：</p><p>1）pretch 加载的资源可以获取非当前页面所需要的资源，并且将其放入缓存至少5分钟（无论资源是否可以缓存）</p><p>2）当页面跳转时，未完成的 prefetch 请求不会被中断</p><ol start="7"><li>ssr服务端渲染</li></ol><p>客户端渲染：获取 HTML 文件，根据需要下载 JavaScript 文件并运行，生成 DOM，然后再渲染。</p><p>服务端渲染：服务端返回 HTML 文件，客户端只需解析 HTML。</p><p>优点：首屏渲染快，对搜索引擎优化（SEO）好。</p><p>缺点：配置麻烦，增加了服务器的计算压力。</p><p><strong>性能优化目前只是在自己的浏览器看，和用户机型实际的性能肯定有参差，那如何获取用户侧的性能指标呢？</strong></p><p>用URM工具，或者在代码里面埋入<code>window.performace</code>和 <code>window.navigator</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// window.performace</span>
<span class="token comment">// 提供了与浏览器性能相关的信息和指标。它允许开发者获取与页面加载、资源加载、导航和计时相关的性能数据</span>
<span class="token number">1.</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>timing：这是一个包含了与页面加载相关的时间戳的对象。它提供了以下属性：

   navigationStart：浏览器开始导航的时间戳。
   unloadEventStart：前一个页面 unload 事件触发的时间戳。
   unloadEventEnd：前一个页面 unload 事件完成的时间戳。
   redirectStart：重定向开始的时间戳。
   redirectEnd：重定向完成的时间戳。
   fetchStart：浏览器开始获取页面资源的时间戳。
   domainLookupStart：域名查询开始的时间戳。
   domainLookupEnd：域名查询完成的时间戳。
   connectStart：与服务器建立连接开始的时间戳。
   connectEnd：与服务器建立连接完成的时间戳。
   secureConnectionStart：安全连接开始的时间戳。
   requestStart：浏览器向服务器发送请求的时间戳。
   responseStart：接收到第一个字节的时间戳。
   responseEnd：接收到最后一个字节的时间戳。
   domLoading：开始解析 <span class="token constant">DOM</span> 的时间戳。
   domInteractive：<span class="token constant">DOM</span> 解析完成、文档准备就绪的时间戳。
   domContentLoadedEventStart：DOMContentLoaded 事件触发的时间戳。
   domContentLoadedEventEnd：DOMContentLoaded 事件完成的时间戳。
   domComplete：<span class="token constant">DOM</span> 解析完成的时间戳。
   loadEventStart：load 事件触发的时间戳。
   loadEventEnd：load 事件完成的时间戳。
   
<span class="token number">2.</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>navigation：这是一个包含有关页面导航的信息的对象。它提供了以下属性：

   type：导航类型，如 <span class="token number">0</span> 表示同步导航，<span class="token number">1</span> 表示重定向导航，<span class="token number">2</span> 表示后退或前进导航。
   redirectCount：重定向次数。

<span class="token number">3.</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>memory：这是一个包含与内存使用情况相关的信息的对象。它提供了以下属性：

   jsHeapSizeLimit：JavaScript 堆内存的大小限制。
   totalJSHeapSize：JavaScript 堆内存的当前使用量。
   usedJSHeapSize：已经分配给 JavaScript 对象的堆内存。

<span class="token number">4.</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：这是一个方法，返回从页面加载开始到调用该方法时经过的毫秒数。它可以用于测量代码执行的时间。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// window.navigator </span>
<span class="token comment">// 是一个提供有关浏览器环境和用户设备的对象。它包含了许多属性和方法，可以用于获取有关浏览器、操作系统和设备的信息。</span>

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent：表示浏览器的用户代理字符串，其中包含了关于用户设备和浏览器的信息。通过解析该字符串，可以获取浏览器类型、版本、操作系统等信息。用正则解析

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>platform：表示用户设备的操作系统平台信息，例如 <span class="token string">&quot;Win32&quot;</span>、<span class="token string">&quot;MacIntel&quot;</span> 等。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>language：表示用户设备的首选语言，通常是基于浏览器设置或操作系统语言。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>appVersion：表示浏览器的版本信息。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>cookieEnabled：表示浏览器是否启用了 Cookie。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>onLine：表示浏览器是否处于联网状态。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>geolocation：表示浏览器是否支持地理位置信息获取。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>plugins：表示浏览器安装的插件列表。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>mimeTypes：表示浏览器支持的 <span class="token constant">MIME</span> 类型列表。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：获取用户设备的电池信息。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">vibrate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：控制设备进行振动。

window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">requestMIDIAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：请求访问 <span class="token constant">MIDI</span> 设备。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->最后更新时间 2023-09-06 05:58:30<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← 浏览器</span><span class="page-nav-item next">设计模式 → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html#性能优化" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html#react性能优化" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="React性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html#如何极致的优化动画性能" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="如何极致的优化动画性能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->如何极致的优化动画性能<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html#cdn" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="CDN"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CDN<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html#虚拟列表" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="虚拟列表"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->虚拟列表<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/guyu.inn/docs/fe/optimization.html#首页白屏优化" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="首页白屏优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->首页白屏优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/guyu.inn/assets/app-5c2eab03.js" defer></script>
  </body>
</html>
