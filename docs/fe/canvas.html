<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="./logo.png"><title>Canvas学习 | 谷雨小栈</title><meta name="description" content="我的一些生活切片">
    <link rel="modulepreload" href="/guyu.inn/assets/app-5c2eab03.js"><link rel="modulepreload" href="/guyu.inn/assets/framework-1749bed7.js"><link rel="modulepreload" href="/guyu.inn/assets/canvas.html-f4ed77c8.js"><link rel="modulepreload" href="/guyu.inn/assets/canvas.html-59d1ef4e.js"><link rel="prefetch" href="/guyu.inn/assets/index.html-6d5e9dd3.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index.html-ab097b1e.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ai.html-a6d6d502.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/database.html-ecf43c05.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/base.html-b953fa6d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/browser.html-d92f4b64.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-base.html-2cb1dafc.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-tool.html-c3406d08.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/designMode.html-2601d84d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/esm.html-cf18d583.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/html.html-baba164b.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/http-base.html-02f1350d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-base.html-616fd2a5.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-practice.html-c4ca7d62.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/logic.html-f3e534d9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/network.html-d5555fa1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-base.html-1a1d1807.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-frame.html-7d5a3790.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/optimization.html-1bb7da03.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/packageManager.html-e7296821.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/pwa.html-bbfee5ed.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/react.html-85d7fa8d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/scene.html-2190d63d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ssr.html-cbaa2746.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tcp.html-f6b26556.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tencent.html-d664718f.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-base.html-01de89c1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-practice.html-70e254a0.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vite.html-3719828d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vue.html-52703ab1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/webpack.html-466121a5.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ws.html-f21fca11.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/devops.html-48b240d9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index.html-63b2c6d6.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index.html-88455b41.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ai.html-b54a67bc.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/database.html-d25a0bd4.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/base.html-d248029a.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/browser.html-d29951a1.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-base.html-f50b914f.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/css-tool.html-4e9ab78a.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/designMode.html-371f8739.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/esm.html-5108f374.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/html.html-029f7950.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/http-base.html-4222efc8.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-base.html-999f91f7.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/js-practice.html-7e47f78b.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/logic.html-b8814052.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/network.html-6511086c.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-base.html-391ffb82.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/node-frame.html-91a19c50.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/optimization.html-dbbb6a13.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/packageManager.html-5eb25c11.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/pwa.html-1c700e74.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/react.html-a22025d5.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/scene.html-08796381.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ssr.html-c6893772.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tcp.html-b10bb9e9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/tencent.html-be16d1b3.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-base.html-5993c65d.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ts-practice.html-7be565f9.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vite.html-adee8657.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/vue.html-aa0d9727.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/webpack.html-8789ba6a.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/ws.html-a4f1ee22.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/devops.html-f225b1cb.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/404.html-1c7b349e.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/reco-valine-a0c1af1f.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/guyu.inn/assets/index-ade63bb5.js" as="script">
    <link rel="preload" href="/guyu.inn/assets/style-28490fbc.css" as="style"><link rel="stylesheet" href="/guyu.inn/assets/style-28490fbc.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><div><header class="navbar-container"><!--[--><div class="site-brand nav-item"><img class="logo" src="/guyu.inn/logo.png" alt="谷雨小栈"><a href="/guyu.inn/" class="site-name can-hide">谷雨小栈</a></div><div class="nav-item navbar-links-wrapper" style=""><div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/guyu.inn/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/fe/html" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/be/database" class="link" aria-label="后端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->后端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ops/devops" class="link" aria-label="运维"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->运维<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/algorithm/base" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ai/ai" class="link" aria-label="人工智能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->人工智能<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="我的江湖"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="我的江湖"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://github.com/Lruler" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="http://forum.muxixyz.com/" target="_blank" rel="noopener noreferrer" aria-label="茶馆"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->茶馆<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://space.bilibili.com/628418245?spm_id_from=333.1007.0.0" target="_blank" rel="noopener noreferrer" aria-label="bilibili"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->bilibili<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div><!--]--></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/guyu.inn/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/fe/html" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/be/database" class="link" aria-label="后端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->后端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ops/devops" class="link" aria-label="运维"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->运维<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/algorithm/base" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/guyu.inn/docs/ai/ai" class="link" aria-label="人工智能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->人工智能<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="我的江湖"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="我的江湖"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->我的江湖<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://github.com/Lruler" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="http://forum.muxixyz.com/" target="_blank" rel="noopener noreferrer" aria-label="茶馆"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->茶馆<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://space.bilibili.com/628418245?spm_id_from=333.1007.0.0" target="_blank" rel="noopener noreferrer" aria-label="bilibili"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->bilibili<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/guyu.inn/logo.png" alt="谷雨小栈"><a href="/guyu.inn/" class="site-name can-hide">谷雨小栈</a></div><!--[--><!--[--><a href="/guyu.inn/docs/fe/html.html" class="link series-item" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/browser.html" class="link series-item" aria-label="浏览器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/optimization.html" class="link series-item" aria-label="性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->性能优化<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/designMode.html" class="link series-item" aria-label="设计模式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->设计模式<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/scene.html" class="link series-item" aria-label="场景题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->场景题<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/guyu.inn/docs/fe/tencent.html" class="link series-item" aria-label="腾讯实习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->腾讯实习<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">CSS篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/css-base.html" class="link series-item" aria-label="CSS基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/css-tool.html" class="link series-item" aria-label="CSS工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS工具<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading active">JavaScript篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/js-base.html" class="link series-item" aria-label="JS基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/js-practice.html" class="link series-item" aria-label="JS实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS实践<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/guyu.inn/docs/fe/canvas.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="Canvas学习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Canvas学习<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">TypeScript篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/ts-base.html" class="link series-item" aria-label="Ts基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ts基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/ts-practice.html" class="link series-item" aria-label="Ts应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ts应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">Node篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/node-base.html" class="link series-item" aria-label="Node基础知识"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Node基础知识<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/node-frame.html" class="link series-item" aria-label="Node框架"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Node框架<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">计算机网络篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/http-base.html" class="link series-item" aria-label="HTTP基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTTP基础<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/tcp.html" class="link series-item" aria-label="TCP基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TCP基础<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/ws.html" class="link series-item" aria-label="WebSocket"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->WebSocket<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">前端框架篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/react.html" class="link series-item" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/vue.html" class="link series-item" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">工具篇</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/esm.html" class="link series-item" aria-label="es moudle与commonJS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->es moudle与commonJS<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/vite.html" class="link series-item" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/webpack.html" class="link series-item" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/packageManager.html" class="link series-item" aria-label="包管理器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->包管理器<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">零碎知识点</h5><ul><li><!--[--><a href="/guyu.inn/docs/fe/ssr.html" class="link series-item" aria-label="ssr"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ssr<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/pwa.html" class="link series-item" aria-label="pwa"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->pwa<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/guyu.inn/docs/fe/logic.html" class="link series-item" aria-label="智力题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->智力题<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">Canvas学习</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->谷雨<!--]--></span></span><!----><!----><!----><!----></div><div class="theme-reco-default-content"><div><h3 id="基本api" tabindex="-1"><a class="header-anchor" href="#基本api" aria-hidden="true">#</a> 基本API</h3><p><a href="https://www.runoob.com/jsref/dom-obj-canvas.html" target="_blank" rel="noopener noreferrer">可查询<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>首先就是 getContext(), 有2d和webGL</p><p>然后就是绘制相关</p><ul><li>直线 (moveTo/lineTo)</li><li>矩形，圆弧，圆，椭圆，贝塞尔曲线</li><li>注意beginPath/closePath 和 clearRect的使用</li><li>可以给线条设置样式，还有渐变透明度等功能</li><li>createPattern 用来绘制图案（可以是图片视频或者其他canvas元素）</li><li>有描边和填充两种方式绘制文字 还可以设置文本样式</li><li>可以设置阴影</li><li>drawImage 绘制图片 还可以缩放裁剪，就是后面的参数</li></ul><p>进阶</p><ul><li><p>save() 和 restore() 对canvas快照保存/恢复</p><p>状态有</p><blockquote><p>应用的变形：移动、旋转、缩放、strokeStyle、fillStyle、globalAlpha、lineWidth、lineCap、lineJoin、miterLimit、lineDashOffset、shadowOffsetX、shadowOffsetY、shadowBlur、shadowColor、globalCompositeOperation、font、textAlign、textBaseline、direction、imageSmoothingEnabled等。</p><p>应用的裁切路径：clipping path</p></blockquote></li><li><p>translate(x, y)、 rotate(angle) 、scale(x, y) 移动/选择/缩放</p></li><li><p>transform、set/reset</p></li><li><p>globalCompositeOperation = type 合成 一堆值</p></li><li><p>clip() 裁剪 可以通过 new Path2D() 来设置裁剪路径</p></li><li><p>定时器 / requestAnimationFrame() 做动画</p></li></ul><h3 id="事件" tabindex="-1"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h3><p>canvas可直接添加鼠标/键盘事件</p><ul><li>Mouseover/out 支持冒泡 mouseenter/leave 不支持</li><li>键盘事件可以先让canvas获得焦点 focus</li></ul><h4 id="内部元素" tabindex="-1"><a class="header-anchor" href="#内部元素" aria-hidden="true">#</a> 内部元素</h4><p>就是判断坐标在不在元素内，用 <code>isPointInPath(x, y)</code></p><h3 id="技巧" tabindex="-1"><a class="header-anchor" href="#技巧" aria-hidden="true">#</a> <a href="https://juejin.cn/post/7030602892901875743#heading-0" target="_blank" rel="noopener noreferrer">技巧<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><blockquote><p>Canvas 最常见的用途是渲染动画。渲染动画的基本原理，无非是反复地擦除和重绘。为了动画的流畅，浏览器留给我们渲染一帧的时间，只有短短的 16ms。在这 16ms 中，我不仅需要处理一些游戏逻辑，计算每个对象的位置、状态，还需要把它们都画出来。如果消耗的时间稍稍多了一些，用户就会感受到「卡顿」。所以，在编写动画的时候，就要格外注重性能</p></blockquote><p>把动画的一帧渲染出来，需要经过以下步骤：</p><ol><li>计算：处理游戏逻辑，计算每个对象的状态，不涉及 DOM 操作（当然也包含对 Canvas 上下文的操作）。</li><li>渲染：真正把对象绘制出来。 2.1. JavaScript 调用 DOM API（包括 Canvas API）以进行渲染。 2.2. 浏览器（通常是另一个渲染线程）把渲染后的结果呈现在屏幕上的过程。（GUI线程而非JS线程）</li></ol><blockquote><p>每一帧的时间只有 16ms。然而，其实我们所做的只是上述的步骤中的 1 和 2.1，而步骤 2.2 则是浏览器在另一个线程（至少几乎所有现代浏览器是这样的）里完成的。动画流畅的真实前提是，以上所有工作都在 16ms 中完成，所以 JavaScript 层面消耗的时间最好控制在 10ms 以内。</p></blockquote><p>通常情况下，渲染比计算的开销大很多（3~4 个量级）。除非用到了一些时间复杂度很高的算法，计算环节的优化没有必要深究。</p><p>我们需要深入研究的，是如何优化渲染的性能。而优化渲染性能的总体思路很简单，归纳为以下几点：</p><ul><li>在每一帧中，尽可能减少调用渲染相关 API 的次数（通常是以计算的复杂化为代价的）。</li><li>在每一帧中，尽可能调用那些渲染开销较低的 API。</li><li>在每一帧中，尽可能以「导致渲染开销较低」的方式调用渲染相关 API。</li></ul><p>我们需要知道的第一件事就是，context 是一个状态机。你可以改变 context 的若干状态，而几乎所有的渲染操作，最终的效果与 context 本身的状态有关系。比如，调用 strokeRect 绘制的矩形边框，边框宽度取决于 context 的状态 lineWidth，而后者是之前设置的。</p><p>Canvas 上下文不是一个普通的对象，比如说，当调用了 context.lineWidth = 5 时，浏览器会需要立刻地做一些事情，这样你、下次调用诸如 stroke 或 strokeRect 等 API 时，画出来的线就正好是 5 个像素宽了（不难想象，这也是一种优化，否则，这些事情就要等到下次 stroke 之前做，更加会影响性能）。</p><p>所以有一点就是，<strong>尽可能少的调用API</strong></p><h4 id="canvas分层" tabindex="-1"><a class="header-anchor" href="#canvas分层" aria-hidden="true">#</a> canvas分层</h4><p>把多个canvas叠在一起，用z-index分层，其实很好理解，就比如说用canvas做了一个小游戏，只有人物在动而背景不动，如果只有一个canvas，每一次动画都会导致背景跟着重新渲染，分层后只需要渲染人物图层就行</p><h4 id="离屏绘制" tabindex="-1"><a class="header-anchor" href="#离屏绘制" aria-hidden="true">#</a> 离屏绘制</h4><p>对于离屏渲染的概念，大多数情况是指：使用一个不可见（或是屏幕外）的 Canvas 对即将渲染的内容的某部分进行提前绘制，然后频繁地将屏幕外图像渲染到主画布上，避免重复生成该部分内容的步骤。直接<code>drawImage()</code>即可</p><p>场景：提前绘制，双Canvas交替绘制，使用<code>OffscreenCanvas</code>达到真正离屏，让canvs运行在web worker线程中</p><h4 id="避免阻塞-js运行时间过长-使用web-worker-拆分任务-放在不同帧中执行" tabindex="-1"><a class="header-anchor" href="#避免阻塞-js运行时间过长-使用web-worker-拆分任务-放在不同帧中执行" aria-hidden="true">#</a> 避免阻塞： JS运行时间过长，使用web worker / 拆分任务 放在不同帧中执行</h4><h4 id="双缓存解决闪烁问题" tabindex="-1"><a class="header-anchor" href="#双缓存解决闪烁问题" aria-hidden="true">#</a> 双缓存解决闪烁问题</h4><p>通过<strong>另外创建一个和主画布等大的缓冲<code>Canvas</code>画布</strong>，需要渲染的图片先绘制到缓冲画布上，然后将缓冲画布的数据直接绘制到主画布上，就解决了闪烁的问题</p><h4 id="局部重绘" tabindex="-1"><a class="header-anchor" href="#局部重绘" aria-hidden="true">#</a> 局部重绘</h4><ol><li>元素互不重叠，只需要重绘需求元素本身</li><li>单个重叠，比如a和b，那就擦除他们的boundingReac</li><li>多个重叠 使用clip</li></ol><ul><li>利用<code>clip</code>裁剪出<code>需要重绘元素</code>的绘制区域</li><li>调用<code>clearRect</code>擦除这块区域</li><li>重绘和这块区域重叠的所有图形</li></ul><p>注意 canvas的transform和c3中不同</p><p>css3中transform是对于单个元素的转换 canvas实际上是对画布的转换，平移实际是对画布原点的重新定位，旋转实际是对画布位置的旋转，缩放实际是对画布大小的缩放，通过对画布的转换来实现对绘制图像的转换，而且这种转换对接下来绘制的所有图像都是成立的，除非我们重置矩阵</p><h3 id="zrender" tabindex="-1"><a class="header-anchor" href="#zrender" aria-hidden="true">#</a> Zrender</h3><p>ZRender 通过以下几个方面对性能进行优化：</p><ul><li><p>图形脏区域管理：ZRender 使用了图形脏区域管理的机制。当图形元素发生变化时，只有受影响的区域会被标记为脏区域，需要重新绘制。这样可以避免不必要的重绘，减少了渲染的工作量，提高了性能。</p></li><li><p>合适的渲染策略：ZRender 根据图形元素的类型和属性，采用了不同的渲染策略。例如，对于简单的图形元素，如矩形或圆形，可以使用批量渲染的方式进行高效绘制。对于复杂的图形元素，如路径或文本，可以使用延迟渲染的方式，只在需要的时候进行渲染，减少了不必要的计算和绘制。</p></li><li><p>硬件加速：ZRender 利用浏览器提供的硬件加速功能，将图形渲染委托给 GPU 进行处理。这样可以充分利用硬件加速的优势，提高图形渲染的性能和效率。</p></li><li><p>动画优化：ZRender 提供了内置的动画 API，用于创建平滑的过渡效果。在动画过程中，ZRender 会根据帧率和动画元素的状态，优化渲染的频率和方式。例如，对于频繁变化的图形元素，可以使用插值计算和帧间差值的方式进行渲染，减少了不必要的绘制操作。</p></li><li><p>缓存和复用：ZRender 对图形元素进行缓存和复用，避免了重复创建和销毁对象的开销。对于相同的图形元素，可以复用已有的对象，减少了内存的占用和垃圾回收的频率，提高了性能。</p></li></ul><p>事件优化：ZRender 通过事件委托和事件分发的方式进行事件处理。它会根据事件的类型和目标元素进行优化，只+ 处理相关的事件，减少了不必要的事件处理和冒泡过程，提高了事件处理的效率。</p><p>这些优化措施使得 ZRender 在大规模图形渲染和复杂交互场景下能够提供良好的性能表现。开发者可以根据具体的需求和场景，灵活地配置和调整这些优化策略，以获得最佳的性能和用户体验。</p><p><strong>要在Canvas上渲染大量节点并优化性能，可以考虑以下几个方面：</strong></p><ul><li><p>使用缓冲区：将要渲染的节点绘制到内存中的缓冲区，然后一次性将整个缓冲区渲染到Canvas上。这样可以减少渲染操作的次数，提高性能。</p></li><li><p>批量绘制：将相似的节点合并为一个单独的图形元素，然后一次性绘制这些图形元素。这样可以减少绘制调用的次数，提高性能。例如，将具有相同样式和属性的节点合并为一个路径进行绘制。</p></li><li><p>使用Web Workers：将渲染操作放在Web Worker中进行，以在后台线程中执行。这样可以避免主线程的阻塞，并提高渲染的并行性能。</p></li><li><p>禁用平滑处理：对于大量的节点渲染，可以禁用平滑处理（antialiasing），这可以提高渲染性能。可以通过设置Canvas的imageSmoothingEnabled属性为false来实现。</p></li><li><p>虚拟化和可见性检测：对于大量节点的情况，可以采用虚拟化技术，只渲染可见区域的节点。通过检测节点是否在可视区域内，只渲染可见的节点，可以显著减少渲染操作的数量。</p></li><li><p>使用GPU加速：利用硬件加速功能，将Canvas渲染操作委托给GPU进行处理，可以提高渲染性能。可以通过使用合适的CSS属性（例如transform: translateZ(0)）或使用WebGL进行渲染来启用GPU加速。</p></li><li><p>优化渲染顺序：根据节点的层叠顺序和重叠情况，合理安排渲染顺序，以减少绘制调用的次数。优先绘制不重叠的节点，然后绘制重叠的节点。</p></li><li><p>数据分析和算法优化：对于复杂的绘制操作，可以进行数据分析，优化算法和数据结构，以减少不必要的计算和渲染操作。</p></li></ul><h3 id="虚拟滚动" tabindex="-1"><a class="header-anchor" href="#虚拟滚动" aria-hidden="true">#</a> 虚拟滚动</h3><p>Canvas虚拟滚动是一种优化技术，用于处理在Canvas上显示大量内容时的性能问题。当需要在Canvas上绘制大量的元素或进行复杂的绘制操作时，会导致性能下降，因为每次渲染都要处理所有的元素或重复进行复杂的绘制操作。</p><p>虚拟滚动通过仅渲染可见区域的内容来解决这个问题。它基于以下原理：在大多数情况下，用户只能看到Canvas上的一小部分内容，而其他部分在当前视图之外。因此，只有可见区域内的内容需要被渲染，而不需要处理整个画布。</p><p>具体实现虚拟滚动的步骤如下：</p><ol><li><p>确定可见区域：首先，确定Canvas上当前可见的区域。这可以通过监听滚动事件或其他交互事件来实现。</p></li><li><p>计算可见元素：根据可见区域的位置和尺寸，计算出在可见区域内应该显示的元素或内容。</p></li><li><p>渲染可见元素：只对计算出的可见元素进行渲染操作，将它们绘制到Canvas上。</p></li></ol><p>通过这种方式，可以避免对整个Canvas进行渲染，从而显著提高性能。虚拟滚动技术适用于需要处理大量元素的情况，例如数据表格、图表、地图等。</p><p>需要注意的是，虚拟滚动并不是Canvas的原生功能，而是一种基于Canvas的性能优化技术，开发者需要自行实现相应的算法和逻辑来实现虚拟滚动效果。</p></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->最后更新时间 2023-09-06 05:58:30<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev inner"><span class="page-nav-item prev"> ← JS实践</span><!----></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/guyu.inn/docs/fe/canvas.html#基本api" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="基本API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->基本API<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/guyu.inn/docs/fe/canvas.html#事件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="事件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->事件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/guyu.inn/docs/fe/canvas.html#技巧" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="技巧"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->技巧<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/guyu.inn/docs/fe/canvas.html#zrender" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="Zrender"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Zrender<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/guyu.inn/docs/fe/canvas.html#虚拟滚动" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="虚拟滚动"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->虚拟滚动<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/guyu.inn/assets/app-5c2eab03.js" defer></script>
  </body>
</html>
